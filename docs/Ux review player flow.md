# Kitchen Flow — 플레이어 흐름 UX/UI 점검 리포트

> 기준: Nielsen 10 Heuristics + Game UI/UX Best Practices
> 대상: `/` → `/user-login` → `/level-select` → `/game` → `/result`
> 날짜: 2026-02-22

---

## 🛑 절대 규칙

**게임 기능에 영향을 미치는 코드는 절대 수정하지 않는다.**
- gameStore.ts의 상태 관리, 조리 로직, 점수 계산, 타이머 — 터치 금지
- 장비 컴포넌트의 인터랙션 로직 (온도, 재료 투입, 액션 실행) — 터치 금지
- 팝업의 데이터 흐름 (BatchAmountInputPopup → gameStore 등) — 터치 금지
- 수정 범위: CSS/Tailwind 스타일, 레이아웃 구조, 컴포넌트 표시/숨김, 텍스트, 네비게이션 경로만

---

## 🔑 서비스 특성: 폐쇄형 B2B SaaS

Kitchen Flow는 **결제한 프랜차이즈만 이용하는 폐쇄형 서비스**다. 불특정 다수가 접속하는 공개 앱이 아니다.

**핵심 전제:**
- 사용자는 반드시 특정 매장에 소속됨 (1인 1매장 또는 관리자가 복수 매장)
- 남의 매장, 남의 레시피를 볼 수 없어야 함
- 따라서 **로그인이 첫 번째 관문**이어야 하고, 매장 선택은 로그인 후에 나와야 함

**현재 흐름 (문제):**
```
매장 선택 (/) → 사용자 선택 (/user-login) → 게임
```
→ 누구나 매장 목록을 볼 수 있음. 인증 없이 매장 구조가 노출됨.

**목표 흐름:**
```
로그인 (/) → 내 매장 홈 (/home) → 게임 or 어드민
```
→ 로그인이 첫 화면. 로그인 후 내 매장이 자동 로드. 홈이 메인 페이지.

---

## 🚨 치명적 문제 (Critical)

### C1. 플로우 구조 전면 재설계: 로그인 → 홈 → 게임/어드민
- **현상**: 현재 `/`(매장 선택)이 첫 화면이라 인증 없이 매장 목록이 노출됨. 사용자 선택 페이지가 "중간 경유지" 느낌으로 빈약함. 어드민 버튼은 매장 선택 후에만 보이는데 매장 선택하면 바로 로그인 페이지로 넘어가서 접근 불가.
- **위반**: Heuristic #7 (유연성), 보안, 서비스 구조
- **개선안 — 3화면 재설계:**

**① `/` 로그인 화면 (새 첫 화면)**
- 매장 코드 또는 매장 선택 + 사용자 선택 + 비밀번호를 한 화면에서 처리
- 매장 목록은 로그인 전에 보여주지 않음 (매장코드 직접 입력 또는 기억된 최근 매장)
- 로그인 성공 → `/home`으로 이동

**② `/home` 메인 홈 (현재 `/user-login` 대체, 진짜 메인 페이지)**
- 상단: "백승진님, 스지명당" — 누가 어디에 로그인했는지 명확
- 중앙: 두 가지 큰 경로
  - `[🎮 훈련 시작]` → `/level-select`
  - `[⚙️ 매장 관리]` → 하위에 "주방 레이아웃", "레시피 관리", "식자재 관리"
- 하단: 최근 게임 기록 요약 (점수, 날짜)
- 이 화면이 사용자가 "내 공간"으로 느끼는 메인 허브

**③ `/level-select` (기존 유지, 개선)**
- 변경 없음 (난이도 정보 보강만)

**라우트 변경 요약:**
| 현재 | 변경 후 | 역할 |
|------|---------|------|
| `/` (StoreSelect) | `/` (LoginPage) | 로그인 관문 |
| `/user-login` (UserLogin) | `/home` (HomePage) | 메인 허브 |
| `/level-select` | `/level-select` | 유지 |
| `/game` | `/game` | 유지 |
| `/result` | `/result` | 유지 |
| `/admin/kitchen` | `/admin/kitchen` | 유지 (홈에서 진입) |
| `/admin/recipe` | `/admin/recipe` | 유지 (홈에서 진입) |

### C2. 디버그 UI가 프로덕션에 노출
- **현상**: 모든 화면에 "🔧 디버그" 버튼, 상단 바에 "매장 미선택 / 로그인 필요 / 신입" 디버그 정보가 항상 보임. 로그인 모달에 "개발 모드: 4자 이상 입력 시 로그인됩니다" 텍스트 노출.
- **위반**: Heuristic #8 (미적이고 최소한 디자인) — 사용자에게 불필요한 정보가 인터페이스를 오염
- **개선안**: 환경변수(`VITE_DEV_MODE`)로 분기. production 빌드에서 완전 숨김. 디버그 상단 바도 dev일 때만 표시.

---

## ⚠️ 주요 문제 (Major)

### M1. `/` 매장 선택 — 빈 공간 과다
- **현상**: 매장 2개 + "새 매장 만들기" 3줄만 있고, 화면의 70%가 빈 공간
- **위반**: Heuristic #8 — 콘텐츠 밀도 부족으로 "미완성" 인상
- **개선안**: 콘텐츠를 수직 중앙 정렬 (현재도 어느 정도 되어있지만 상단 여백이 과다). 매장 카드에 부가 정보 추가 — 등록된 레시피 수, 마지막 게임 플레이 날짜, 장비 개수 등

### M2. `/home` (현재 `/user-login`) — 메인 허브로 승격 필요
- **현상**: 사용자 카드에 아바타 아이콘 + 이름만 있음. 역할(ADMIN/STAFF), 마지막 접속 등 없음. 경유지 느낌으로 빈약함.
- **위반**: Heuristic #1 (시스템 상태 가시성) — 메인 페이지인데 정보가 없음
- **개선안**: C1의 `/home` 설계에 따라 전면 재구성:
  - 환영 메시지 + 사용자/매장 정보
  - 🎮 훈련 시작 / ⚙️ 매장 관리 두 가지 큰 CTA
  - 최근 게임 기록 (점수, 날짜, 레벨)
  - 로그아웃 버튼

### M3. `/level-select` — 각 레벨의 차이가 불명확
- **현상**: "메뉴 1개씩 들어옴 · 천천히 연습" 같은 한 줄 설명만. 목표 개수, 시간제한, 실수 처리 방식의 차이를 알 수 없음
- **위반**: Heuristic #2 (시스템과 현실 세계의 일치) — 난이도 선택에 필요한 정보 부족
- **개선안**: 각 카드에 핵심 수치 표시:
  - 신입: 목표 3개 / 주문 30초마다 / 틀리면 차단
  - 알바: 목표 10개 / 주문 20초마다 / 틀려도 진행
  - 관리자: 목표 10개 / 주문 15초마다 / 화구 3개 풀가동

### M4. `/game` — 주문 카드 정보 과밀 + 가독성 문제
- **현상**: 주문 카드에 메뉴명, 주문번호, 타이머, 화구배정, 묶음정보가 빼곡. MIXED 메뉴(육회물회)의 묶음 표시("4개 묶음 ▶ 클릭하여 펼치기 / 메인 냉면육수 육회 스멸삼")가 작은 카드 안에 구겨져 있음.
- **위반**: Heuristic #8 + Game UX (정보 계층) — 1차 정보(메뉴명, 시간)와 2차 정보(묶음 상세)가 동일 수준으로 표시
- **개선안**:
  - 주문 카드: 메뉴명 + 타이머만 기본 표시. 화구 배정은 아이콘으로 축소
  - 묶음 상세: 카드 클릭 시 확장 또는 별도 패널
  - 색상으로 긴급도 구분 (초록→노랑→빨강)

### M5. `/game` — 하단 영역 (레시피 가이드 / 액션 로그) 활용도 불명
- **현상**: 레시피 가이드(정답지)가 항상 펼쳐져 있음. "화구1: 메뉴 대기 중 CLEAN" — 게임 시작 직후에는 아무 정보가 없어 공간 낭비. 액션 로그도 비어있음.
- **위반**: Game UX (progressive disclosure) — 필요할 때만 보여줘야 함
- **개선안**: 레시피 가이드는 접을 수 있는 패널로. 메뉴가 배정되면 자동 펼침. 액션 로그는 기본 접힘, 토글 버튼으로 열기.

### M6. `/game` — 주방 레이아웃 스크롤 필요
- **현상**: 핫키친(상단)과 콜드키친(하단)이 세로로 길어서 스크롤해야 전체가 보임. 게임 중 스크롤은 치명적 — 주문 타이머가 돌아가는 중에 장비를 찾아 스크롤하면 시간 손실.
- **위반**: Game UX (한 화면에 핵심 정보) — 게임 플레이 중 스크롤은 몰입 파괴
- **개선안**:
  - 방법 A: 주방을 2페이지 탭으로 분리 ("핫키친" / "콜드키친") — 현재 페이지네이션 dot이 보이는데 이걸 더 명확하게
  - 방법 B: 줌 레벨 조절 (축소하면 전체 보임)
  - 방법 C: 장비 크기를 줄여서 한 화면에 fit

---

## 💡 개선 제안 (Minor / Enhancement)

### E1. 전체 — 일관된 네비게이션 헤더
- **현상**: 각 화면의 상단 구성이 제각각. `/`은 "처음으로" 버튼만, `/user-login`은 "← 매장 선택", `/level-select`는 "로그아웃 / 처음으로", `/game`은 "로그아웃 / 처음으로".
- **개선안**: 통일된 헤더 컴포넌트 — 좌측에 뒤로가기/홈, 우측에 컨텍스트 액션. breadcrumb 느낌: `스지명당 > 백승진 > 관리자`

### E2. `/` — "처음으로" 버튼이 `/`에서 의미 없음
- **현상**: 이미 홈 화면인데 "처음으로" 버튼이 있음
- **개선안**: `/`에서는 숨기거나 다른 액션으로 대체

### E3. `/user-login` — 비밀번호 모달 UX
- **현상**: Enter 키로 제출 가능한지 불명. 포커스가 입력 필드에 자동으로 가는지 불명.
- **개선안**: 모달 열릴 때 input 자동 포커스. Enter = 로그인. ESC = 취소.

### E4. `/level-select` — 선택 피드백 강화
- **현상**: 선택된 레벨(신입)에 연한 테두리만 있음. 시작하기 버튼이 선택 없이도 활성화되어 보임.
- **개선안**: 선택된 카드에 더 강한 시각 피드백 (배경색 변경, 체크마크). 미선택 시 시작 버튼 비활성화.

### E5. `/game` — 튀김기 바스켓 표시
- **현상**: 주문카드에서 "닭껍질 튀김"에 바스켓1/2/3이 초록/노랑/빨강 색으로 표시 — 색상의 의미가 불명
- **개선안**: 색상 범례 추가 또는, 배정 상태를 텍스트로 명시 ("바스켓1: 배정됨")

### E6. `/game` — 데코존 FAB 버튼 발견성 낮음
- **현상**: 우하단 보라색 원형 FAB 버튼이 데코존 진입점인데, 무엇인지 라벨 없음
- **개선안**: 아이콘 + 라벨 ("🍽 데코") 또는 툴팁 추가

### E7. `/game` — 화구 사용율 바가 의미 불명
- **현상**: 하단에 "화구 사용율" 프로그레스 바가 있지만 수치 없음
- **개선안**: 퍼센트 수치 표시. 또는 게임 중에는 숨기고 결과 화면에서만 표시.

---

## 📊 화면별 요약

| 화면 | 심각도 | 핵심 문제 | 우선 수정 |
|------|--------|-----------|-----------|
| `/` 매장 선택 → 로그인으로 전환 | 🔴 Critical | 인증 없이 매장 노출, 플로우 재설계 필요 | C1, C2 |
| `/home` (현 `/user-login`) | 🔴 Critical | 경유지 → 메인 허브로 승격 | C1, M2 |
| `/level-select` | 🟡 Major | 난이도 차이 불명확 | M3, E4 |
| `/game` 주문영역 | 🟡 Major | 정보 과밀, 가독성 | M4, E5 |
| `/game` 주방영역 | 🔴 Critical | 스크롤 필요, 한눈에 안 보임 | M6 |
| `/game` 하단영역 | 🟡 Major | 공간 낭비, progressive disclosure 부족 | M5, E6, E7 |
| `/result` | ⬜ 미확인 | 스크린샷 없음 | — |

---

## 🔧 구현 우선순위 (Claude Code 프롬프트 순서)

### Round 1: 플로우 재설계 (C1 + C2)
1. **C2** — 디버그 UI 환경변수 분기 (가장 쉬움, 전체 인상 개선)
2. **C1** — 전체 플로우 재설계:
   - `/` → LoginPage (매장코드 + 사용자 + 비번)
   - `/home` → HomePage (메인 허브: 훈련 시작 / 매장 관리)
   - 기존 StoreSelect.tsx, UserLogin.tsx → LoginPage.tsx, HomePage.tsx로 교체
   - ⚠️ gameStore, 게임 로직, 팝업 데이터 흐름 절대 수정 금지

### Round 2: 홈 + 온보딩 개선
3. **M2** — `/home` 메인 허브 구현 (환영 메시지, CTA 2개, 최근 기록)
4. **M3** — 레벨 선택 카드 정보 보강
5. **E3** — 비밀번호 모달 UX (autofocus, Enter 제출) → 로그인 페이지에 통합
6. **E4** — 레벨 선택 피드백 강화
7. **E1** — 통일 헤더 컴포넌트

### Round 3: 게임 화면 개선 (시각만, 로직 금지)
8. **M4** — 주문 카드 정보 계층 정리 (CSS/레이아웃만)
9. **M6** — 주방 한 화면 fit (또는 탭 전환 명확화)
10. **M5** — 레시피 가이드/액션 로그 접기 (표시/숨김만)
11. **E5, E6, E7** — 바스켓 색상 범례, 데코존 FAB 라벨, 화구 사용율 수치